<%= render 'layouts/admin/tabs' %>

<article class="message">
  <div class="message-header">
    <p>Artistas Visibles</p>
  </div>
  <div class="message-body">
    <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>Artista</th>
          <th>Visible</th>
        </tr>
      </thead>
      <tbody>
        <% @encuentro.artistas.each.with_index(1) do |artista, index| %>
        <tr>
          <td><%= index %></td>
          <td><%= artista.nombre %></td>
          <td>
            <%= check_box_tag dom_id(artista, 'active_toggle'),
                  artista.visible?(@encuentro),
                  artista.visible?(@encuentro),
                  data: { remote: true,
                    url: toggle_visibilidad_artista_path(@encuentro, artista),
                    method: :patch } %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</article>

<article class="message">
  <div class="message-header">
    <p>Habilitar/Deshabilitar Encuentro</p>
  </div>
  <div class="message-body">
    <p>El estado del encuentro determina si estar치 disponible a los visitantes de la p치gina.</p>
    <p>Por defecto, el encuentro habilitado m치s reciente es el que se muestra al llegar a la p치gina principal.</p>
    <p>El cambio de este estado puede realizarse las veces que estime conveniente.</p>
    <br>
    <%= form_with model: [:admin, @encuentro] do |f| %>
      <%= f.hidden_field :url, value: admin_encuentro_path(@encuentro) %>
      <%= f.hidden_field :habilitado, value: !@encuentro.habilitado? %>
      <%= f.submit @encuentro.habilitado? ? 'Deshabilitar' : 'Habilitar', class: 'button is-link' %>
    <% end %>
  </div>
</article>
